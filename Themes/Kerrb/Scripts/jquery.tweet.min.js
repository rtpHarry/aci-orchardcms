(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){n.fn.tweet=function(t){function r(n,t){var i,r,u;if(typeof n=="string"){i=n;for(r in t)u=t[r],i=i.split("{"+r+"}").join(u===null?"":u);return i}return n(t)}function u(t,i){return function(){var r=[];return this.each(function(){r.push(this.replace(t,i))}),n(r)}}function e(n){return n.replace(/</g,"&lt;").replace(/>/g,"^&gt;")}function o(n,t){return n.replace(f,function(n){for(var i,r=/^[a-z]+:/i.test(n)?n:"http://"+n,f=n,u=0;u<t.length;++u)if(i=t[u],i.url===r&&i.expanded_url){r=i.expanded_url;f=i.display_url;break}return'<a href="'+e(r)+'">'+e(f)+"<\/a>"})}function h(n){return Date.parse(n.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3"))}function c(n){var i=function(n){return parseInt(n,10)},r=new Date,t=i((r.getTime()-n)/1e3);return t<1&&(t=0),{days:i(t/86400),hours:i(t/3600),minutes:i(t/60),seconds:i(t)}}function l(n){return n.days>2?"about "+n.days+" days ago":n.hours>24?"about a day ago":n.hours>2?"about "+n.hours+" hours ago":n.minutes>45?"about an hour ago":n.minutes>2?"about "+n.minutes+" minutes ago":n.seconds>1?"about "+n.seconds+" seconds ago":"just now"}function a(n){return n.match(/^(@([A-Za-z0-9-_]+)) .*/i)?i.auto_join_text_reply:n.match(f)?i.auto_join_text_url:n.match(/^((\w+ed)|just) .*/im)?i.auto_join_text_ed:n.match(/^(\w*ing) .*/i)?i.auto_join_text_ing:i.auto_join_text_default}function v(){return i.twitter_api_url}function s(n,t){return t?"user"in n?n.user.profile_image_url_https:s(n,!1).replace(/^http:\/\/[a-z0-9]{1,3}\.twimg\.com\//,"https://s3.amazonaws.com/twitter_production/"):n.profile_image_url||n.user.profile_image_url}function y(t){var u={};return u.item=t,u.source=t.source,u.screen_name=t.from_user||t.user.screen_name,u.name=t.from_user_name||t.user.name,u.retweet=typeof t.retweeted_status!="undefined",u.tweet_time=h(t.created_at),u.join_text=i.join_text==="auto"?a(t.text):i.join_text,u.tweet_id=t.id_str,u.twitter_base="http://"+i.twitter_url+"/",u.user_url=u.twitter_base+u.screen_name,u.tweet_url=u.user_url+"/status/"+u.tweet_id,u.reply_url=u.twitter_base+"intent/tweet?in_reply_to="+u.tweet_id,u.retweet_url=u.twitter_base+"intent/retweet?tweet_id="+u.tweet_id,u.favorite_url=u.twitter_base+"intent/favorite?tweet_id="+u.tweet_id,u.retweeted_screen_name=u.retweet&&t.retweeted_status.user.screen_name,u.tweet_relative_time=l(c(u.tweet_time)),u.entities=t.entities?(t.entities.urls||[]).concat(t.entities.media||[]):[],u.tweet_raw_text=u.retweet?"RT @"+u.retweeted_screen_name+" "+t.retweeted_status.text:t.text,u.tweet_text=n([o(u.tweet_raw_text,u.entities)]).linkUser().linkHash()[0],u.retweeted_tweet_text=n([o(t.text,u.entities)]).linkUser().linkHash()[0],u.tweet_text_fancy=n([u.tweet_text]).makeHeart()[0],u.avatar_size=i.avatar_size,u.avatar_url=s(u.retweet?t.retweeted_status:t,document.location.protocol==="https:"),u.avatar_screen_name=u.retweet?u.retweeted_screen_name:u.screen_name,u.avatar_profile_url=u.twitter_base+u.avatar_screen_name,u.user=r('<a class="tweet_user" href="{user_url}">{screen_name}<\/a>',u),u.join=i.join_text?r('<span class="tweet_join">{join_text}<\/span>',u):"",u.avatar=u.avatar_size?r('<a class="tweet_avatar" href="{avatar_profile_url}"><img src="{avatar_url}" height="{avatar_size}" width="{avatar_size}" alt="{avatar_screen_name}\'s avatar" title="{avatar_screen_name}\'s avatar" border="0"/><\/a>',u):"",u.time=r('<span class="tweet_time"><a href="{tweet_url}" title="view tweet on twitter">{tweet_relative_time}<\/a><\/span>',u),u.text=r('<span class="tweet_text">{tweet_text_fancy}<\/span>',u),u.retweeted_text=r('<span class="tweet_text">{retweeted_tweet_text}<\/span>',u),u.reply_action=r('<a class="tweet_action tweet_reply" href="{reply_url}">reply<\/a>',u),u.retweet_action=r('<a class="tweet_action tweet_retweet" href="{retweet_url}">retweet<\/a>',u),u.favorite_action=r('<a class="tweet_action tweet_favorite" href="{favorite_url}">favorite<\/a>',u),u}function p(t,u){var f=n('<ul class="tweets">');f.append(n.map(u,function(n){return"<li"+(i.li_class?' class="'+i.li_class+'"':"")+">"+r(i.template,n)+"<\/li>"}).join("")).children("li:first").addClass("tweet_first").end().children("li:odd").addClass("tweet_even").end().children("li:even").addClass("tweet_odd");n(t).append(f);i.intro_text&&f.before('<p class="tweet_intro">'+i.intro_text+"<\/p>");i.outro_text&&f.after('<p class="tweet_outro">'+i.outro_text+"<\/p>");n(t).trigger("loaded").trigger(u.length===0?"empty":"full");i.refresh_interval&&window.setTimeout(function(){n(t).trigger("tweet:load")},1e3*i.refresh_interval)}function w(t){var r=n('<p class="loading">'+i.loading_text+"<\/p>");i.loading_text&&n(t).not(":has(.tweet_list)").empty().append(r);n.getJSON(v(),function(r){var u=n.map(r.results||r,y);u=n.grep(u,i.filter).sort(i.comparator).slice(0,i.count);n(t).trigger("tweet:retrieved",[u])})}var i=n.extend({username:null,list:null,favorites:!1,query:null,avatar_size:null,count:3,fetch:null,page:1,retweets:!0,intro_text:null,outro_text:null,join_text:null,auto_join_text_default:" I said, ",auto_join_text_ed:" I ",auto_join_text_ing:" I am ",auto_join_text_reply:" I replied to ",auto_join_text_url:" I was looking at ",loading_text:null,refresh_interval:null,twitter_url:"twitter.com",twitter_api_url:"api.twitter.com",twitter_search_url:"search.twitter.com",template:"{avatar}{time}{join} {text}",li_class:"",comparator:function(n,t){return t.tweet_time-n.tweet_time},filter:function(){return!0}},t),f=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi;return n.extend({tweet:{t:r}}),n.fn.extend({linkUser:u(/(^|[\W])@(\w+)/gi,'$1<span class="at">@<\/span><a href="http://'+i.twitter_url+'/$2">$2<\/a>'),linkHash:u(/(?:^| )[\#]+([\w\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0600-\u06ff]+)/gi,' <a href="https://twitter.com/search?q=%23$1&lang=all'+(i.username&&i.username.length===1&&!i.list?"&from="+i.username.join("%2BOR%2B"):"")+'" class="tweet_hashtag">#$1<\/a>'),makeHeart:u(/(&lt;)+[3]/gi,"<tt class='heart'>&#x2665;<\/tt>")}),this.each(function(t,r){i.username&&typeof i.username=="string"&&(i.username=[i.username]);n(r).unbind("tweet:render").unbind("tweet:retrieved").unbind("tweet:load").bind({"tweet:load":function(){w(r)},"tweet:retrieved":function(t,i){n(r).trigger("tweet:render",[i])},"tweet:render":function(t,i){p(n(r),i)}}).trigger("tweet:load")})}});
//# sourceMappingURL=jquery.tweet.min.js.map