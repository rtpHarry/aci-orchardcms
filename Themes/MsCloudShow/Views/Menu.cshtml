@{
  // Model is Model.Menu from the layout (Layout.Menu)
  var tag = Tag(Model, "ul");

  var items = (IList<dynamic>)Enumerable.Cast<dynamic>(Model.Items);

  int classNameSuffix = 0;

  foreach (var i in items) {
    classNameSuffix++;
    string className = "menu-item-" + classNameSuffix.ToString();
    i.Classes.Add(className);

    if (classNameSuffix >= 6) {
      classNameSuffix = 0;
    }
  }

  if (items.Any()) {
    items[0].Classes.Add("first");
    items[items.Count - 1].Classes.Add("last");
  }
}

<ul class="nav pull-right">
  @* see MenuItem shape template *@
  @DisplayChildren(Model)
</ul>
